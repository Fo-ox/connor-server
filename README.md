# Архитектура серверной части

<img width="777" alt="Снимок экрана 2024-09-15 в 20 35 12" src="https://github.com/user-attachments/assets/2c953183-5c4c-4e12-ac22-5e3b8d2a46f8">

## API
### User controller
GET: /user/authorise Содержит два обязательных query параметра ’login’ и ’password’, в случае успешной операции формирует JWT токен для пользователя системы и возвра- щает в ответе. В случае ошибки возвращает предупреждение.

GET: /user/users Возвращает всех пользователей системы.

GET: /user/user Содержит обязательный query параметр ’id’ и возвращает в случае успеха данные по запрошенному пользователю.

POST: /user/create Запрос на создание нового пользователя системы. В случае успеха возвращает созданного пользователя. Валидирует логин на уникальность и не позволяет создать пользователя с аналогичным логином. Если в запросе был указан internalSystemId, в случае нахождения среди пользователей системы, пользователя созданного путем интеграции с другой системы и не содержащего логин и пароль - объединит такие аккаунты в один.

POST: /user/create Запрос на создание обновление данных пользователя системы. В случае успеха возвращает обновленные данные пользователя. Если в запросе был указан internalSystemId, в случае нахождения среди пользователей системы, пользователя созданного путем интеграции с другой системы и не содержащего логин и пароль - объединит такие аккаунты в один.

### Task controller
GET: /task/tasks Возвращает все задачи в системе. Имеет необязательный query параметр ’filter’, возвращающий задачи с фильтрацией по заданному условию.

GET: /task/task Содержит обязательный query параметр ’id’ и возвращает в случае успеха данные по запрошенной задаче.

POST: /task/create Запрос на создание задачи. После успешного сохранению в базу данных, если задача не находится в завершенном состоянии, отправляется асинхронный запрос в redis на расчет оценки времени для этой задачи.

POST: /task/create/jira Запрос на создание задачи по специальной модели сущности jira-API. После успешного сохранению в базу данных, если задача не находится в завершенном состоянии, отправляется асинхронный запрос в redis на расчет оценки времени для этой задачи.

POST: /task/update Запрос на обновление задачи. После успешного сохранению в базу данных, если задача не находится в завершенном состоянии, отправляется асинхронный запрос в redis на расчет оценки времени для этой задачи.

POST: /task/create/jira Запрос обновление задачи по специальной модели сущности jira-API. После успешного сохранению в базу данных, если задача не находится в завершенном состоянии, отправляется асинхронный запрос в redis на расчет оценки вре- мени для этой задачи.

### Model controller
GET: /model/models Возвращает все обученные модели системы.

GET: /model/defaultModel Содержит обязательный query параметр ’id’, использует модель с выбранным id для рассчета времени задач.

GET: /model/train Содержит обязательный query параметр ’modelType’. При выполнении запроса model-controller отправляет асинхронный запрос в redis на обучение новой версии модели с заданным типом.

GET: /model/predict Содержит обязательный query параметр ’taskId’. При выполнении запроса model-controller отправляет асинхронный запрос в redis для расчета времени выполнения задачи.
